<div *ngIf="user; else loadError">
  <p *ngIf="user.is_admin">[ADMIN]</p>
  <p>NOMBRE DE USUARIO: {{ user.username }}</p>
  <p>SIGUIENDO: {{ followed }}</p>
  <p>SEGUIDORES: {{ followers }}</p>
  <div *ngIf="user$ | async as loggedUser">
    <div *ngIf="user.id !== loggedUser.id">
      <button
        *ngIf="!isFollowedByUser"
        (click)="follow()"
        class="bg-blue-500 text-white font-medium py-1 px-2 rounded-sm hover:cursor-pointer hover:bg-blue-500"
      >
        Seguir
      </button>
      <button
        *ngIf="isFollowedByUser"
        (click)="unfollow()"
        class="bg-blue-500 text-white font-medium py-1 px-2 rounded-sm hover:cursor-pointer hover:bg-blue-500"
      >
        Dejar de seguir
      </button>
    </div>
  </div>
  <div>
    <p>VISTAS</p>
    <div class="flex flex-wrap">
      <div *ngFor="let movie of watched">
        <a routerLink="/{{ movie.id }}">
          <img
            src="{{ baseImageUrl + '/w200' + movie.poster }}"
            alt="{{ movie.title }} poster"
            width="100px"
        /></a>
      </div>
    </div>
  </div>
  <div>
    <p>FAVORITAS</p>
    <div class="flex flex-wrap">
      <div *ngFor="let movie of favorites">
        <a routerLink="/{{ movie.id }}">
          <img
            src="{{ baseImageUrl + '/w200' + movie.poster }}"
            alt="{{ movie.title }} poster"
            width="100px"
        /></a>
      </div>
    </div>
  </div>
  <div>
    <p>LISTAS</p>
  </div>

  <div *ngIf="user$ | async as loggedUser">
    <button
      *ngIf="user.id === loggedUser.id"
      (click)="deleteAccount()"
      class="bg-red-800 text-white font-medium py-1 px-2 rounded-sm hover:cursor-pointer hover:bg-red-700"
    >
      Eliminar cuenta
    </button>
  </div>
</div>

<ng-template #loadError>{{ errorMessage }}</ng-template>
